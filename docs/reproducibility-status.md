# データ追加・更新プロセス再現性レポート

## 現在のレベル: 🟡 中程度の再現性

### ✅ 完全自動化済み（100%再現性）
```bash
pnpm run validate-data      # データ整合性検証
pnpm run fix-bidirectional  # 双方向路線自動修正
pnpm run add-sources        # ソース属性自動追加
```

### 🟡 半自動化済み（70%再現性）
```bash
pnpm run add-airport        # 新規空港追加ウィザード
pnpm run add-airline        # 新規航空会社追加ウィザード
```
**特徴**: 
- 対話式ウィザードで必要情報を収集
- ファイル作成・更新を自動実行
- データ形式の統一を保証
- 基本的な検証を自動実行

**残り手動部分**:
- 路線データの調査・入力
- 公式ソースURLの確認

### ❌ 完全手動（20%再現性）
- **空港公式サイトからの情報収集**: WebSearchによる手動調査
- **路線データの詳細入力**: JSONファイル直接編集
- **公式ソース確認**: 各航空会社サイトの手動確認

## 📋 作業手順（現在版）

### 1. 新規空港追加の場合
```bash
# Step 1: 自動化ツール実行
pnpm run add-airport

# Step 2: 路線データ手動追加（public/data/airports/[CODE].json）
# Step 3: 検証・修正
pnpm run validate-data
pnpm run fix-bidirectional

# Step 4: 最終確認・コミット
git add . && git commit -m "feat: add [空港名] with official sources"
```

### 2. 新規航空会社追加の場合  
```bash
# Step 1: 自動化ツール実行
pnpm run add-airline

# Step 2: 該当空港ファイルに路線データ追加
# Step 3: 検証・修正
pnpm run validate-data

# Step 4: 最終確認・コミット  
git add . && git commit -m "feat: add [航空会社名] routes"
```

### 3. 既存データ修正の場合
```bash
# 手動でJSONファイル編集後
pnpm run validate-data
pnpm run fix-bidirectional  # 必要に応じて
git add . && git commit
```

## 🎯 再現性レベル評価

### 現在の状況（総合: 70%再現性）
| 工程 | 再現性 | 理由 |
|------|--------|------|
| 新規空港追加 | 🟡 70% | ウィザード化済み、路線データは手動 |
| 新規航空会社追加 | 🟡 70% | ウィザード化済み、路線データは手動 |
| 路線データ追加 | 🔴 20% | 完全手動、公式ソース調査必要 |
| データ検証 | 🟢 100% | 完全自動化 |
| エラー修正 | 🟢 90% | ほぼ自動化、一部判断必要 |

### 別の担当者が困る可能性
- **低リスク**: 基本的な空港・航空会社追加
- **中リスク**: 複雑な路線関係の理解
- **高リスク**: 公式ソース情報の判断

## 📈 改善計画

### Phase 1: 基本手順書完成（完了）
- ✅ 詳細手順書作成
- ✅ 半自動化スクリプト作成
- ✅ エラー対応マニュアル作成

### Phase 2: 情報収集自動化（今後）
- [ ] 空港公式サイト自動スクレイピング
- [ ] 航空会社時刻表自動解析
- [ ] 路線変更自動検出

### Phase 3: 完全自動化（将来）
- [ ] CI/CD統合による定期更新
- [ ] 公式API統合（OurAirports等）
- [ ] 機械学習による情報抽出

## 🚦 現在の推奨事項

### 明日別の人が担当する場合
1. **必読**: `docs/data-update-procedures.md`
2. **利用**: 半自動化スクリプト（`add-airport`, `add-airline`）
3. **確認**: 各ステップでの検証ツール実行
4. **緊急時**: GitHub Issues で質問・相談

### 品質保証
- 全変更で `pnpm run validate-data` 実行必須
- 0 errors, 0 warnings になるまで修正
- 本番反映前の動作確認

## 結論

**「明日別の人が担当して迷わず実行できますか？」**
→ **基本作業は可能、複雑な調査は要注意**

- ✅ **定型作業**: 手順書+自動化ツールで可能
- ⚠️ **調査作業**: 経験・判断が必要
- ❌ **完全自立**: まだ一部属人的

**改善効果**: 従来20%の再現性から70%まで向上
**次期目標**: 90%以上の再現性実現（情報収集自動化）